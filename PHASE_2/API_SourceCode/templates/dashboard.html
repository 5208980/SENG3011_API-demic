{% extends "layout.html" %} {% block body %} <section id="dashboard" class="container pt-5"><div id="dashboard-info" class="pb-5"><h2 class="dashboard-title text-bold">Covid 19 Latest Totals</h2><div class="dashboard-text">Last Updated: <span id="last_update" class="text-primary"></span></div> <a class="text-dark" href="{{ url_for('home') }}"><span class="material-icons">home</span></a></div><div class="row text-center"><div class="col-lg-3 count-border count-left"><div id="total_cases" class="count"></div> Confirmed</div><div class="col-lg-3 count-border count-middle"><div id="death_cases" class="count text-danger"></div> Deaths</div><div class="col-lg-3 count-border count-middle"><div id="recovery_cases" class="count text-success"></div> Recovered</div><div class="col-lg-3 count-border count-right"><div id="currently_infected" class="count"></div> Active</div></div><div class="dashboard-title text-bold pt-3">New confirmed cases daily</div><div class="chart_box"><div id="global-confirmed-chart" class="pt-5" style="width: 50vw; height: 50vh;"></div></div> </section> <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script><script type="text/javascript">function updateData(){var e=fetch("https://corona-virus-stats.herokuapp.com/api/v1/cases/general-stats").then(e=>e.json()),t=fetch("https://covidapi.info/api/v1/global/count").then(e=>e.json());Promise.all([e,t]).then(e=>{console.log(e[0]);let t=e[0].data;document.getElementById("total_cases").innerText=`${t.total_cases}`,document.getElementById("death_cases").innerText=`${t.death_cases}`,document.getElementById("recovery_cases").innerText=`${t.recovery_cases}`,document.getElementById("currently_infected").innerText=`${t.currently_infected}`,document.getElementById("last_update").innerText=`${t.last_update}`;let a=e[1];var o={title:"Global",backgroundColor:{fill:"transparent"},titleTextStyle:{color:"white",fontName:"Lato",fontSize:18,bold:!1},legend:{position:"bottom",textStyle:{fontSize:12}},vAxis:{viewWindow:{min:0},textStyle:{fontSize:12}},hAxis:{gridlines:{color:"none"},textStyle:{fontSize:12}},animation:{duration:1e3,easing:"out",startup:!0},series:{0:{color:"#2979FF"}},tooltip:{isHtml:!0}};function n(){var e=new google.visualization.DataTable;e.addColumn("date","date"),e.addColumn("number","confirmed");var t=new google.visualization.DataTable;t.addColumn("date","date"),t.addColumn("number","recovered");var n=new google.visualization.DataTable;n.addColumn("date","date"),n.addColumn("number","deaths");let l=[];for(var i in a.result)l.push({date:i,confirmed:a.result[i].confirmed});for(var d=0;d<l.length;d++)void 0!==l[d+1]&&(console.log(l[d]),e.addRow([new Date(l[d].date),l[d+1].confirmed-l[d].confirmed]));o.title="Global",o.series[0].color="red",new google.visualization.ColumnChart(document.getElementById("global-confirmed-chart")).draw(e,o)}google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(n),animateCount(),$(window).resize(function(){n()})})}updateData(),setInterval(function(){updateData()},3e5);</script> {% endblock %}
