{% extends "layout.html" %} {% block body %} {% include 'nav.html' %} <div id="map" style="height: 80vh;"></div><a onclick="smooth_scroll_to('info')"><div class="material-icons font-40 text-center arrow_down" style="height: 20vh; width: 100vw;">expand_more</div></a><section class="row pt-5" id="info"><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-hidden" style="height: 614px;"><h5 class="card-title sticky-top">Total Cases in Australia</h5><div id="total_au_cases"></div><div class="last_updated"></div><div id="casesChart" style="width: 100%; height: 100%; margin: 0 auto; padding: 0"></div></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-hidden" style="height: 614px;"><h5 class="card-title">Total Tests conducted in Australia</h5><div id="total_au_tests"></div><div class="last_updated"></div><div id="testsChart"style="width: 100%; height: 100%;"></div></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-hidden" style="height: 614px;"><h5 class="card-title">Total currently in Hospitals</h5> <span id="total_au_hospitals"></span><span>(estimate)</span><div class="last_updated"></div><div id="hospitalsChart"style="width: 100%; height: 100%;"></div></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Deaths</h5><div id="total_au_deaths"></div><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Date</th><th scope="col">State</th><th scope="col">Age - Location</th></tr></thead><tbody id="latest_deaths"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll bg-white" style="height: 614px;"><h5 class="card-title">New South Wales Cases by Local Government Area</h5><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Latest Date</th><th scope="col">Location</th><th scope="col">Positive Cases</th></tr></thead><tbody id="nsw_cases_by_lga"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Latest Positives in NSW</h5><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Date Confirmed</th><th scope="col">Location</th><th scope="col">Postcode</th><th scope="col">source</th></tr></thead><tbody id="nsw_latest_cases"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Victoria Cases by Local Government Area</h5><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Latest Date</th><th scope="col">Location</th><th scope="col">Positive Cases</th></tr></thead><tbody id="vic_cases_by_lga"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Western Australia Cases by Local Government Area</h5><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Latest Date</th><th scope="col">Location</th><th scope="col">Positive Cases</th></tr></thead><tbody id="wa_cases_by_lga"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Queensland Cases by Hospital and Health Services</h5><div class="last_updated"></div><table class="table table-striped"><thead><tr><th scope="col">Latest Date</th><th scope="col">Location</th><th scope="col">Positive Cases</th></tr></thead><tbody id="qld_cases_by_lga"></tbody></table></div></div></div><div class="col-lg-6 container pt-3"><div class="card"><div class="card-body overflow-scroll" style="height: 614px;"><h5 class="card-title">Disclaimer</h5><div class="container"> The data used has been generated using <a href="https://www.theguardian.com/au" target="blank"> The Guardian Australia</a>. The information provided will be as real time as possible but is not garentee. The data sources comes from Australia offical governments sites. For more insights for each country<div id="sources" class="list-group list-group-flush"></div></div></div></div></div> </section> <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script><script type="text/javascript">function smooth_scroll_to(e){document.getElementById(`${e}`).scrollIntoView({behavior:"smooth"})}function parseJson(e){return JSON.parse(e.replace(/&#34;/g,'"'))}let au_json=parseJson("{{ au }}"),jsonSources=parseJson("{{ sources }}"),sources=document.getElementById("sources");for(i in jsonSources){let e=document.createElement("a");e.classList.add("list-group-item","list-group-item-action"),e.setAttribute("href",`${jsonSources[i]}`),e.setAttribute("target","_blank"),e.innerText=`${i}`,sources.appendChild(e)}function createTr(e){let t=document.createElement("td");return t.innerText=`${e}`,t}let latest_deaths=document.getElementById("latest_deaths"),total_au_deaths=0,deathsJson=au_json.deaths;deathsJson.reverse().forEach(e=>{let t=document.createElement("tr"),a=e.date.split("/"),o=createTr(`${a[0]}/${a[1]}`);t.appendChild(o);let n=createTr(e.state);t.appendChild(n);let r=createTr(e.details);t.appendChild(r),latest_deaths.append(t),total_au_deaths+=1}),document.getElementById("total_au_deaths").innerText=`${total_au_deaths.toLocaleString("en")}`;let records=parseJson("{{ nsw_latest_cases }}").records,nsw_latest_cases=document.getElementById("nsw_latest_cases");records.reverse().forEach(e=>{let t=document.createElement("tr"),a=e.notification_date.split("-"),o=createTr(`${a[2]}/${a[1]}`);t.appendChild(o);let n=createTr(e.nsw_lga__3);n.classList.add("text-capitalize"),t.appendChild(n);let r=createTr(e.postcode);t.appendChild(r);let s=createTr(e.likely_source_of_infection);t.appendChild(s),nsw_latest_cases.append(t)});var geojson,map=L.map("map",{center:[-23.698,133.8807],zoom:5,minZoom:5,maxZoom:10,layers:[L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Map data &copy; OpenStreetMap contributors"})]}),info=L.control({position:"topright"});function highlightPolygon(e){var t=e.target;t.setStyle({weight:2,color:"#666",dashArray:"",fillOpacity:.7}),t.bringToFront(),info.update(t.feature.properties)}function removeHighlight(e){geojson.resetStyle(e.target),info.update()}function zoomToFeature(e){map.flyTo(e.target.getBounds().getCenter(),10),info.update(e.target.feature.properties)}function onEachFeature(e,t){t.on({mouseover:highlightPolygon,mouseout:removeHighlight,click:zoomToFeature})}function style(e){return{fillColor:getColor(e.properties.confirmed),weight:2,opacity:1,color:"white",fillOpacity:.7}}function getColor(e){return e>50?"#b10026":e>40?"#e31a1c":e>30?"#fc4e2a":e>20?"#fd8d3c":e>10?"#feb24c":e>5?"#fed976":e>1?"#ffeda0":e>0?"#ffffcc":e<0?"blue":"#ebedf0"}function generateTableCases(e,t){let a=document.createElement("tr");dates=t.date.split("T")[0].split("-");let o=createTr(`${dates[2]}/${dates[1]}`);a.appendChild(o);let n=createTr(e);n.classList.add("text-capitalize"),a.appendChild(n);let r=createTr(t.count);return a.appendChild(r),a}function drawChart(){document.querySelectorAll(".last_updated").forEach(e=>{e.innerText=`Last updated: ${au_json.last_updated}`});var e=new google.visualization.DataTable;e.addColumn("string","Country"),e.addColumn("number","Cases"),e.addColumn({role:"style"});var t=new google.visualization.DataTable;t.addColumn("string","Country"),t.addColumn("number","Tests"),t.addColumn({role:"style"});var a=new google.visualization.DataTable;a.addColumn("string","Country"),a.addColumn("number","Hospitalised"),a.addColumn({role:"style"});let o={NSW:"#3266cc",VIC:"#dc3b30",QLD:"#f19833",SA:"#4d971c",ACT:"#9b3998",NT:"#3f9ac7",TAS:"#dd4477",WA:"#65aa03"},n=0,r=0,s=0,i=au_json.states;for(var l in i)e.addRow([l,i[l].cases,o[l]]),n+=i[l].cases,t.addRow([l,i[l].tests,o[l]]),r+=i[l].tests,a.addRow([l,i[l].hospitalised,o[l]]),s+=i[l].hospitalised;document.getElementById("total_au_cases").innerText=`${n.toLocaleString("en")}`,document.getElementById("total_au_tests").innerText=`${r.toLocaleString("en")}`,document.getElementById("total_au_hospitals").innerText=`${s.toLocaleString("en")}`;let d={duration:1e3,easing:"out",startup:!0},c={width:"75%",height:"70%"},u={position:"bottom"};var p={pieSliceText:"label",legend:u,chartArea:c,backgroundColor:{fill:"transparent"}},g={legend:u,chartArea:c,hAxis:{gridlines:{color:"none"}},animation:d,tooltip:{isHtml:!0}},m={legend:u,chartArea:c,hAxis:{gridlines:{color:"none"}},animation:d,tooltip:{isHtml:!0}};new google.visualization.PieChart(document.getElementById("casesChart")).draw(e,p),new google.visualization.ColumnChart(document.getElementById("testsChart")).draw(t,g),new google.visualization.ColumnChart(document.getElementById("hospitalsChart")).draw(a,m)}info.onAdd=function(e){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},info.update=function(e){e?e.hasOwnProperty("nsw_lga__3")?this._div.innerHTML="<h4> Info Panel </h4><b>"+e.nsw_lga__3+"</b><br />"+(e.confirmed?e.confirmed:"0")+" confirmed cases":e.hasOwnProperty("wa_lga_s_3")?this._div.innerHTML="<h4> Info Panel </h4><b>"+e.wa_lga_s_3+"</b><br />"+(e.confirmed?e.confirmed:"0")+" confirmed cases":e.hasOwnProperty("qld_hhs__3")?this._div.innerHTML="<h4> Info Panel </h4><b>"+e.qld_hhs__3+"</b><br />"+(e.confirmed?e.confirmed:"0")+" confirmed cases":e.hasOwnProperty("vic_lga__3")&&(this._div.innerHTML="<h4> Info Panel </h4><b>"+e.vic_lga__3+"</b><br />"+(e.confirmed?e.confirmed:"0")+" confirmed cases"):this._div.innerHTML="<h4> Info Panel </h4>Hover over a country"},info.addTo(map),$.getJSON("{{ url_for('static', filename='wa.json') }}",function(e){let t=parseJson("{{ wa }}");for(i in e.features)name=e.features[i].properties.wa_lga_s_3.toLowerCase(),t[name]&&(e.features[i].properties.confirmed=t[name].count);let a=document.getElementById("wa_cases_by_lga");for(lga in t)a.appendChild(generateTableCases(lga,t[lga]));geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}).addTo(map)}),$.getJSON("{{ url_for('static', filename='nsw.json') }}",function(e){let t=parseJson("{{ nsw }}");for(i in e.features)name=e.features[i].properties.nsw_lga__3.toLowerCase(),t[name]&&(e.features[i].properties.confirmed=t[name].count);let a=document.getElementById("nsw_cases_by_lga");for(lga in t)a.appendChild(generateTableCases(lga,t[lga]));geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}).addTo(map)}),$.getJSON("{{ url_for('static', filename='vic.json') }}",function(e){let t=parseJson("{{ vic }}");for(i in e.features)name=e.features[i].properties.vic_lga__3.toLowerCase(),t[name]&&(e.features[i].properties.confirmed=t[name].count);let a=document.getElementById("vic_cases_by_lga");for(lga in t)a.appendChild(generateTableCases(lga,t[lga]));geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}).addTo(map)}),$.getJSON("{{ url_for('static', filename='qld.json') }}",function(e){let t=parseJson("{{ qld }}");for(i in e.features)name=e.features[i].properties.qld_hhs__3.toLowerCase(),t[name]&&(e.features[i].properties.confirmed=t[name].count);let a=document.getElementById("qld_cases_by_lga");for(lga in t)a.appendChild(generateTableCases(lga,t[lga]));geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}).addTo(map)}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawChart),$(window).resize(function(){drawChart()}),$.getJSON("{{ url_for('static', filename='au.json') }}",function(e){for(i in e.features)e.features[i].properties.confirmed=au_json.states[e.features[i].properties.wa_lga_s_3].cases;geojson=L.geoJson(e,{style:style,onEachFeature:onEachFeature}).addTo(map)});</script> {% endblock %}
